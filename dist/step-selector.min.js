(function(){angular.module("step-selector",[]),angular.module("step-selector").factory("StepSelector",function(){var t;return t=function(){function t(t){this._conditions=[],this._current=1,this._events={},this._locked=!1,this._lockedSteps=[],this._stepsHistory=[1],t&&this.addConditions(t)}return t.prototype.currentStep=function(){return this._current},t.prototype.isCurrentStep=function(){var t,e,n,i;for(n=!1,t=0,e=arguments.length;e>t;t++)i=arguments[t],n=n||this._current===i;return n},t.prototype.isCurrentStepInRange=function(t,e){if(!t||!e)throw new Error("Edges are required");if(t=parseInt(t),e=parseInt(e),isNaN(t)||isNaN(e))throw new Error("Edges are required");if(t>e)throw new Error("min should be less than max");return this._current>=t&&this._current<=e},t.prototype.addConditions=function(t){var e,n,i,r;if(angular.isArray(t)){for(r=[],n=0,i=t.length;i>n;n++)e=t[n],r.push(this.addCondition(e));return r}},t.prototype.addCondition=function(t){if(!angular.isFunction(t))throw new Error("Condtition should be function");return this._conditions.push(t)},t.prototype.evalConditions=function(){var t,e,n,i,r;for(i=this._conditions,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.call());return r},t.prototype.isSuccessCondition=function(t){return t&&""!==t},t.prototype.isStepAvailable=function(t){var e,n,i;if(t=parseInt(t),isNaN(t))throw new Error("Step should be an integer");return 1>t?!1:(n=this.evalConditions().slice(0,t-1),e=function(){var t,e,r;for(r=[],t=0,e=n.length;e>t;t++)i=n[t],this.isSuccessCondition(i)&&r.push(i);return r}.call(this),e.length===n.length)},t.prototype.isAllStepsAvailable=function(){return this.isStepAvailable(this._conditions.length+1)},t.prototype.isPrevStepAvailable=function(){return this.isStepAvailable(this._current-1)},t.prototype.isNextStepAvailable=function(){return this.isStepAvailable(this._current+1)},t.prototype.isVisitedStep=function(t){return-1!==this._stepsHistory.indexOf(t)},t.prototype.lock=function(){return this._locked=!0},t.prototype.unlock=function(){return this._locked=!1},t.prototype.lockStep=function(t){return this._lockedSteps.push(t)},t.prototype.unlockStep=function(t){var e;return e=this._lockedSteps.indexOf(t),-1!==e?this._lockedSteps.splice(e,1):void 0},t.prototype.goTo=function(t){var e;return!this._locked&&-1===this._lockedSteps.indexOf(t)&&t<=this._conditions.length&&this.isStepAvailable(t)?(e=this._current,this._current=t,this._stepsHistory.push(t),this.trigger("goTo",[this._current,e])):void 0},t.prototype.prevStep=function(){return this.goTo(this._current-1)},t.prototype.nextStep=function(){return this.goTo(this._current+1)},t.prototype.goToTheLatestAvailableStep=function(){var t,e,n,i,r,o;for(i=1,o=this.evalConditions(),n=e=0,r=o.length;r>e&&(t=o[n],this.isSuccessCondition(t));n=++e)i=n+1,this._stepsHistory.push(i);return this.goTo(Math.min(i+1,this._conditions.length))},t.prototype.on=function(t,e){return this._events[t]||(this._events[t]=[]),this._events[t].push(e)},t.prototype.trigger=function(t,e){var n,i,r,o,s;for(o=this._events[t]||[],s=[],i=0,r=o.length;r>i;i++)n=o[i],angular.isFunction(n)&&s.push(n.apply(this,e));return s},t}()})}).call(this);